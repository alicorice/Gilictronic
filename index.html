<!doctype html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="style.css">
  <title>NesJS</title>
</head>
<body>
  <input id="rom" type="file">
  <button id="pause">Pause</button>
  <button id="reset">Reset</button>
  <button id="hardreset">Power cycle</button>
  <button id="runframe">Run 1 frame</button><br>
  <button id="select-rom">play</button><img src="yiarcp0f.jpg">
  <canvas id="output"></canvas>
  <pre style="display:none;" id="log"></pre>
  <p style="display:none;">
    NesJs, by elzo_d. <a href="debug.html">Debugger</a>, <a href="nsfplayer.html">NsfJs</a>.<br>
    Source on <a href="https://github.com/elzo-d/NesJs">Github</a>.
  </p>

  <script src="lib/zip.js"></script>
  <script src="lib/inflate.js"></script>

  <script src="nes/mappers.js"></script>
  <script src="mappers/nrom.js"></script>
  <script src="mappers/mmc1.js"></script>
  <script src="mappers/uxrom.js"></script>
  <script src="mappers/cnrom.js"></script>
  <script src="mappers/mmc3.js"></script>
  <script src="mappers/axrom.js"></script>

  <script src="nes/cpu.js"></script>
  <script src="nes/pipu.js"></script>
  <script src="nes/apu.js"></script>
  <script src="nes/nes.js"></script>

  <script src="js/audio.js"></script>
  <script src="js/main.js"></script>

  <script>
    const defaultRomFilePath = 'g1.nes';
    
    const selectRomBtn = document.getElementById('select-rom');
    const romInput = document.getElementById('rom');
    
    selectRomBtn.addEventListener('click', () => {
      fetch(defaultRomFilePath)
        .then(response => response.blob())
        .then(blob => {
          const file = new File([blob], 'default-rom-file');
          romInput.files = [file];
          selectRomBtn.style.display = 'none';
        })
        .catch(error => {
          console.error(`Failed to fetch default ROM file: ${error}`);
        });
    });
    
    romInput.addEventListener('change', () => {
      if (romInput.files.length > 0) {
        selectRomBtn.style.display = 'none';
      } else {
        selectRomBtn.style.display = 'block';
      }
    });
    </script>

</body>
</html>
